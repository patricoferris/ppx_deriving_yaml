name: Github OCaml-CI
on: [push, pull_request]
jobs:
  debian-10-4_11:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:bf4bb3fd34e3638dd0d45fe37be9e53946130caa1061cb1bf0bad7f91fc85a50
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: alcotest.1.2.3 astring.0.8.5 base.v0.14.0 base-bigarray.base base-threads.base
        base-unix.base bigarray-compat.1.0.0 bos.0.2.0 cmdliner.1.0.4 conf-m4.1 conf-pkg-config.1.3
        cppo.1.6.6 csexp.1.3.2 cstruct.6.0.0 ctypes.0.17.1 dune.2.7.1 dune-configurator.2.7.1
        ezjsonm.1.2.0 fmt.0.8.9 fpath.0.7.3 hex.1.4.0 integers.0.4.0 jsonm.1.0.1 logs.0.7.0
        mdx.1.7.0 num.1.3 ocaml.4.11.1 ocaml-base-compiler.4.11.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.8.0 ocaml-version.3.0.0 ocamlbuild.0.14.0
        ocamlfind.1.8.1 odoc.1.5.1 parsexp.v0.14.0 ppx_derivers.1.2.1 ppx_sexp_conv.v0.14.1
        ppxlib.0.15.0 re.1.9.0 result.1.5 rresult.0.6.0 seq.base sexplib.v0.14.0 sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 tyxml.4.4.0 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2
        yaml.2.1.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        || git fetch origin master) && git reset -q --hard 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn ppx_deriving_yaml.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y ppx_deriving_yaml.dev $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  debian-10-4_10:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:448537709746304246280d99f57934dbad1647aea859db8f230760039f26cd68
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: alcotest.1.2.3 astring.0.8.5 base.v0.14.0 base-bigarray.base base-threads.base
        base-unix.base bigarray-compat.1.0.0 bos.0.2.0 cmdliner.1.0.4 conf-m4.1 conf-pkg-config.1.3
        cppo.1.6.6 csexp.1.3.2 cstruct.6.0.0 ctypes.0.17.1 dune.2.7.1 dune-configurator.2.7.1
        ezjsonm.1.2.0 fmt.0.8.9 fpath.0.7.3 hex.1.4.0 integers.0.4.0 jsonm.1.0.1 logs.0.7.0
        mdx.1.7.0 num.1.3 ocaml.4.10.1 ocaml-base-compiler.4.10.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.8.0 ocaml-version.3.0.0 ocamlbuild.0.14.0
        ocamlfind.1.8.1 odoc.1.5.1 parsexp.v0.14.0 ppx_derivers.1.2.1 ppx_sexp_conv.v0.14.1
        ppxlib.0.15.0 re.1.9.0 result.1.5 rresult.0.6.0 seq.base sexplib.v0.14.0 sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 tyxml.4.4.0 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2
        yaml.2.1.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        || git fetch origin master) && git reset -q --hard 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn ppx_deriving_yaml.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y ppx_deriving_yaml.dev $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  debian-10-4_09:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:9564ec4ef4ee9710b94142417bc97b9831bca773b26fe7ce794b9938178ad3fe
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: alcotest.1.2.3 astring.0.8.5 base.v0.14.0 base-bigarray.base base-threads.base
        base-unix.base bigarray-compat.1.0.0 bos.0.2.0 cmdliner.1.0.4 conf-m4.1 conf-pkg-config.1.3
        cppo.1.6.6 csexp.1.3.2 cstruct.6.0.0 ctypes.0.17.1 dune.2.7.1 dune-configurator.2.7.1
        ezjsonm.1.2.0 fmt.0.8.9 fpath.0.7.3 hex.1.4.0 integers.0.4.0 jsonm.1.0.1 logs.0.7.0
        mdx.1.7.0 num.1.3 ocaml.4.09.1 ocaml-base-compiler.4.09.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.8.0 ocaml-version.3.0.0 ocamlbuild.0.14.0
        ocamlfind.1.8.1 odoc.1.5.1 parsexp.v0.14.0 ppx_derivers.1.2.1 ppx_sexp_conv.v0.14.1
        ppxlib.0.15.0 re.1.9.0 result.1.5 rresult.0.6.0 seq.base sexplib.v0.14.0 sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 tyxml.4.4.0 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2
        yaml.2.1.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        || git fetch origin master) && git reset -q --hard 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn ppx_deriving_yaml.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y ppx_deriving_yaml.dev $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  alpine-3_12-4_11:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:4781b8eb3af9da0b624ca74c537ae1b2a637506cd7bdea1722d021c8c88f0b64
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: alcotest.1.2.3 astring.0.8.5 base.v0.14.0 base-bigarray.base base-threads.base
        base-unix.base bigarray-compat.1.0.0 bos.0.2.0 cmdliner.1.0.4 conf-m4.1 conf-pkg-config.1.3
        cppo.1.6.6 csexp.1.3.2 cstruct.6.0.0 ctypes.0.17.1 dune.2.7.1 dune-configurator.2.7.1
        ezjsonm.1.2.0 fmt.0.8.9 fpath.0.7.3 hex.1.4.0 integers.0.4.0 jsonm.1.0.1 logs.0.7.0
        mdx.1.7.0 num.1.3 ocaml.4.11.1 ocaml-base-compiler.4.11.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.8.0 ocaml-version.3.0.0 ocamlbuild.0.14.0
        ocamlfind.1.8.1 odoc.1.5.1 parsexp.v0.14.0 ppx_derivers.1.2.1 ppx_sexp_conv.v0.14.1
        ppxlib.0.15.0 re.1.9.0 result.1.5 rresult.0.6.0 seq.base sexplib.v0.14.0 sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 tyxml.4.4.0 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2
        yaml.2.1.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        || git fetch origin master) && git reset -q --hard 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn ppx_deriving_yaml.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y ppx_deriving_yaml.dev $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  alpine-3_12-4_10:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:022168bd581a10954b475baa0d95ee1a21025e848f0b3eefd0817fd457f03480
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: alcotest.1.2.3 astring.0.8.5 base.v0.14.0 base-bigarray.base base-threads.base
        base-unix.base bigarray-compat.1.0.0 bos.0.2.0 cmdliner.1.0.4 conf-m4.1 conf-pkg-config.1.3
        cppo.1.6.6 csexp.1.3.2 cstruct.6.0.0 ctypes.0.17.1 dune.2.7.1 dune-configurator.2.7.1
        ezjsonm.1.2.0 fmt.0.8.9 fpath.0.7.3 hex.1.4.0 integers.0.4.0 jsonm.1.0.1 logs.0.7.0
        mdx.1.7.0 num.1.3 ocaml.4.10.1 ocaml-base-compiler.4.10.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.8.0 ocaml-version.3.0.0 ocamlbuild.0.14.0
        ocamlfind.1.8.1 odoc.1.5.1 parsexp.v0.14.0 ppx_derivers.1.2.1 ppx_sexp_conv.v0.14.1
        ppxlib.0.15.0 re.1.9.0 result.1.5 rresult.0.6.0 seq.base sexplib.v0.14.0 sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 tyxml.4.4.0 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2
        yaml.2.1.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        || git fetch origin master) && git reset -q --hard 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn ppx_deriving_yaml.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y ppx_deriving_yaml.dev $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  alpine-3_12-4_09:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:9586d19a8eb85ce4f19441d6842707155378fbb45a39d0f449ed4d758243217b
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: alcotest.1.2.3 astring.0.8.5 base.v0.14.0 base-bigarray.base base-threads.base
        base-unix.base bigarray-compat.1.0.0 bos.0.2.0 cmdliner.1.0.4 conf-m4.1 conf-pkg-config.1.3
        cppo.1.6.6 csexp.1.3.2 cstruct.6.0.0 ctypes.0.17.1 dune.2.7.1 dune-configurator.2.7.1
        ezjsonm.1.2.0 fmt.0.8.9 fpath.0.7.3 hex.1.4.0 integers.0.4.0 jsonm.1.0.1 logs.0.7.0
        mdx.1.7.0 num.1.3 ocaml.4.09.1 ocaml-base-compiler.4.09.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.8.0 ocaml-version.3.0.0 ocamlbuild.0.14.0
        ocamlfind.1.8.1 odoc.1.5.1 parsexp.v0.14.0 ppx_derivers.1.2.1 ppx_sexp_conv.v0.14.1
        ppxlib.0.15.0 re.1.9.0 result.1.5 rresult.0.6.0 seq.base sexplib.v0.14.0 sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 tyxml.4.4.0 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2
        yaml.2.1.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        || git fetch origin master) && git reset -q --hard 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn ppx_deriving_yaml.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y ppx_deriving_yaml.dev $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  ubuntu-18_04-4_11:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:9e218d9504485a82c4b494b9f4dea4d49d71deb04a32d58ef1e153dd348f397c
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: alcotest.1.2.3 astring.0.8.5 base.v0.14.0 base-bigarray.base base-threads.base
        base-unix.base bigarray-compat.1.0.0 bos.0.2.0 cmdliner.1.0.4 conf-m4.1 conf-pkg-config.1.3
        cppo.1.6.6 csexp.1.3.2 cstruct.6.0.0 ctypes.0.17.1 dune.2.7.1 dune-configurator.2.7.1
        ezjsonm.1.2.0 fmt.0.8.9 fpath.0.7.3 hex.1.4.0 integers.0.4.0 jsonm.1.0.1 logs.0.7.0
        mdx.1.7.0 num.1.3 ocaml.4.11.1 ocaml-base-compiler.4.11.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.8.0 ocaml-version.3.0.0 ocamlbuild.0.14.0
        ocamlfind.1.8.1 odoc.1.5.1 parsexp.v0.14.0 ppx_derivers.1.2.1 ppx_sexp_conv.v0.14.1
        ppxlib.0.15.0 re.1.9.0 result.1.5 rresult.0.6.0 seq.base sexplib.v0.14.0 sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 tyxml.4.4.0 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2
        yaml.2.1.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        || git fetch origin master) && git reset -q --hard 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn ppx_deriving_yaml.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y ppx_deriving_yaml.dev $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  ubuntu-18_04-4_10:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:058874dc5b14f2c40d6392c50b14e29ae7088f4ece38c855ed0309a4a34a3a05
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: alcotest.1.2.3 astring.0.8.5 base.v0.14.0 base-bigarray.base base-threads.base
        base-unix.base bigarray-compat.1.0.0 bos.0.2.0 cmdliner.1.0.4 conf-m4.1 conf-pkg-config.1.3
        cppo.1.6.6 csexp.1.3.2 cstruct.6.0.0 ctypes.0.17.1 dune.2.7.1 dune-configurator.2.7.1
        ezjsonm.1.2.0 fmt.0.8.9 fpath.0.7.3 hex.1.4.0 integers.0.4.0 jsonm.1.0.1 logs.0.7.0
        mdx.1.7.0 num.1.3 ocaml.4.10.1 ocaml-base-compiler.4.10.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.8.0 ocaml-version.3.0.0 ocamlbuild.0.14.0
        ocamlfind.1.8.1 odoc.1.5.1 parsexp.v0.14.0 ppx_derivers.1.2.1 ppx_sexp_conv.v0.14.1
        ppxlib.0.15.0 re.1.9.0 result.1.5 rresult.0.6.0 seq.base sexplib.v0.14.0 sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 tyxml.4.4.0 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2
        yaml.2.1.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        || git fetch origin master) && git reset -q --hard 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn ppx_deriving_yaml.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y ppx_deriving_yaml.dev $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  ubuntu-18_04-4_09:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:2dcbe7ae46bd42626e68dbb0bd5f53eb1de6a44d916afafa9233334700f13688
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: alcotest.1.2.3 astring.0.8.5 base.v0.14.0 base-bigarray.base base-threads.base
        base-unix.base bigarray-compat.1.0.0 bos.0.2.0 cmdliner.1.0.4 conf-m4.1 conf-pkg-config.1.3
        cppo.1.6.6 csexp.1.3.2 cstruct.6.0.0 ctypes.0.17.1 dune.2.7.1 dune-configurator.2.7.1
        ezjsonm.1.2.0 fmt.0.8.9 fpath.0.7.3 hex.1.4.0 integers.0.4.0 jsonm.1.0.1 logs.0.7.0
        mdx.1.7.0 num.1.3 ocaml.4.09.1 ocaml-base-compiler.4.09.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.8.0 ocaml-version.3.0.0 ocamlbuild.0.14.0
        ocamlfind.1.8.1 odoc.1.5.1 parsexp.v0.14.0 ppx_derivers.1.2.1 ppx_sexp_conv.v0.14.1
        ppxlib.0.15.0 re.1.9.0 result.1.5 rresult.0.6.0 seq.base sexplib.v0.14.0 sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 tyxml.4.4.0 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2
        yaml.2.1.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        || git fetch origin master) && git reset -q --hard 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn ppx_deriving_yaml.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y ppx_deriving_yaml.dev $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  opensuse-15_2-4_11:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:d2850afa46f0789bad899e3bb06b0b587020a830b1d8255e89df5faa1df1d378
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: alcotest.1.2.3 astring.0.8.5 base.v0.14.0 base-bigarray.base base-threads.base
        base-unix.base bigarray-compat.1.0.0 bos.0.2.0 cmdliner.1.0.4 conf-m4.1 conf-pkg-config.1.3
        cppo.1.6.6 csexp.1.3.2 cstruct.6.0.0 ctypes.0.17.1 dune.2.7.1 dune-configurator.2.7.1
        ezjsonm.1.2.0 fmt.0.8.9 fpath.0.7.3 hex.1.4.0 integers.0.4.0 jsonm.1.0.1 logs.0.7.0
        mdx.1.7.0 num.1.3 ocaml.4.11.1 ocaml-base-compiler.4.11.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.8.0 ocaml-version.3.0.0 ocamlbuild.0.14.0
        ocamlfind.1.8.1 odoc.1.5.1 parsexp.v0.14.0 ppx_derivers.1.2.1 ppx_sexp_conv.v0.14.1
        ppxlib.0.15.0 re.1.9.0 result.1.5 rresult.0.6.0 seq.base sexplib.v0.14.0 sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 tyxml.4.4.0 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2
        yaml.2.1.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        || git fetch origin master) && git reset -q --hard 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn ppx_deriving_yaml.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y ppx_deriving_yaml.dev $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  opensuse-15_2-4_10:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:5b12e53e989287f65cd4af933c531ad9cfb6133c9a1b403992c1cf3aadbc9dfb
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: alcotest.1.2.3 astring.0.8.5 base.v0.14.0 base-bigarray.base base-threads.base
        base-unix.base bigarray-compat.1.0.0 bos.0.2.0 cmdliner.1.0.4 conf-m4.1 conf-pkg-config.1.3
        cppo.1.6.6 csexp.1.3.2 cstruct.6.0.0 ctypes.0.17.1 dune.2.7.1 dune-configurator.2.7.1
        ezjsonm.1.2.0 fmt.0.8.9 fpath.0.7.3 hex.1.4.0 integers.0.4.0 jsonm.1.0.1 logs.0.7.0
        mdx.1.7.0 num.1.3 ocaml.4.10.1 ocaml-base-compiler.4.10.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.8.0 ocaml-version.3.0.0 ocamlbuild.0.14.0
        ocamlfind.1.8.1 odoc.1.5.1 parsexp.v0.14.0 ppx_derivers.1.2.1 ppx_sexp_conv.v0.14.1
        ppxlib.0.15.0 re.1.9.0 result.1.5 rresult.0.6.0 seq.base sexplib.v0.14.0 sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 tyxml.4.4.0 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2
        yaml.2.1.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        || git fetch origin master) && git reset -q --hard 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn ppx_deriving_yaml.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y ppx_deriving_yaml.dev $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  opensuse-15_2-4_09:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:93fc47747aa4dc849f614ca32cffc77754b2f8f69dc3a2f8289c7bf5cbe022e4
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: alcotest.1.2.3 astring.0.8.5 base.v0.14.0 base-bigarray.base base-threads.base
        base-unix.base bigarray-compat.1.0.0 bos.0.2.0 cmdliner.1.0.4 conf-m4.1 conf-pkg-config.1.3
        cppo.1.6.6 csexp.1.3.2 cstruct.6.0.0 ctypes.0.17.1 dune.2.7.1 dune-configurator.2.7.1
        ezjsonm.1.2.0 fmt.0.8.9 fpath.0.7.3 hex.1.4.0 integers.0.4.0 jsonm.1.0.1 logs.0.7.0
        mdx.1.7.0 num.1.3 ocaml.4.09.1 ocaml-base-compiler.4.09.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.8.0 ocaml-version.3.0.0 ocamlbuild.0.14.0
        ocamlfind.1.8.1 odoc.1.5.1 parsexp.v0.14.0 ppx_derivers.1.2.1 ppx_sexp_conv.v0.14.1
        ppxlib.0.15.0 re.1.9.0 result.1.5 rresult.0.6.0 seq.base sexplib.v0.14.0 sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 tyxml.4.4.0 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2
        yaml.2.1.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        || git fetch origin master) && git reset -q --hard 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn ppx_deriving_yaml.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y ppx_deriving_yaml.dev $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  centos-8-4_11:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:248f23b9de0f02ee7497691d6a1293ae606018d4d36069577913e0b1548d257c
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: alcotest.1.2.3 astring.0.8.5 base.v0.14.0 base-bigarray.base base-threads.base
        base-unix.base bigarray-compat.1.0.0 bos.0.2.0 cmdliner.1.0.4 conf-m4.1 conf-pkg-config.1.3
        cppo.1.6.6 csexp.1.3.2 cstruct.6.0.0 ctypes.0.17.1 dune.2.7.1 dune-configurator.2.7.1
        ezjsonm.1.2.0 fmt.0.8.9 fpath.0.7.3 hex.1.4.0 integers.0.4.0 jsonm.1.0.1 logs.0.7.0
        mdx.1.7.0 num.1.3 ocaml.4.11.1 ocaml-base-compiler.4.11.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.8.0 ocaml-version.3.0.0 ocamlbuild.0.14.0
        ocamlfind.1.8.1 odoc.1.5.1 parsexp.v0.14.0 ppx_derivers.1.2.1 ppx_sexp_conv.v0.14.1
        ppxlib.0.15.0 re.1.9.0 result.1.5 rresult.0.6.0 seq.base sexplib.v0.14.0 sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 tyxml.4.4.0 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2
        yaml.2.1.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        || git fetch origin master) && git reset -q --hard 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn ppx_deriving_yaml.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y ppx_deriving_yaml.dev $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  centos-8-4_10:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:f819ad730cefd8d80e911fed09fe208782c44daa6cec1778c81b626113f57041
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: alcotest.1.2.3 astring.0.8.5 base.v0.14.0 base-bigarray.base base-threads.base
        base-unix.base bigarray-compat.1.0.0 bos.0.2.0 cmdliner.1.0.4 conf-m4.1 conf-pkg-config.1.3
        cppo.1.6.6 csexp.1.3.2 cstruct.6.0.0 ctypes.0.17.1 dune.2.7.1 dune-configurator.2.7.1
        ezjsonm.1.2.0 fmt.0.8.9 fpath.0.7.3 hex.1.4.0 integers.0.4.0 jsonm.1.0.1 logs.0.7.0
        mdx.1.7.0 num.1.3 ocaml.4.10.1 ocaml-base-compiler.4.10.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.8.0 ocaml-version.3.0.0 ocamlbuild.0.14.0
        ocamlfind.1.8.1 odoc.1.5.1 parsexp.v0.14.0 ppx_derivers.1.2.1 ppx_sexp_conv.v0.14.1
        ppxlib.0.15.0 re.1.9.0 result.1.5 rresult.0.6.0 seq.base sexplib.v0.14.0 sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 tyxml.4.4.0 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2
        yaml.2.1.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        || git fetch origin master) && git reset -q --hard 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn ppx_deriving_yaml.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y ppx_deriving_yaml.dev $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  centos-8-4_09:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:fa04d7520d7152d2d303b716edaf651bd2463adc22484cae016757d9fdf16275
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: alcotest.1.2.3 astring.0.8.5 base.v0.14.0 base-bigarray.base base-threads.base
        base-unix.base bigarray-compat.1.0.0 bos.0.2.0 cmdliner.1.0.4 conf-m4.1 conf-pkg-config.1.3
        cppo.1.6.6 csexp.1.3.2 cstruct.6.0.0 ctypes.0.17.1 dune.2.7.1 dune-configurator.2.7.1
        ezjsonm.1.2.0 fmt.0.8.9 fpath.0.7.3 hex.1.4.0 integers.0.4.0 jsonm.1.0.1 logs.0.7.0
        mdx.1.7.0 num.1.3 ocaml.4.09.1 ocaml-base-compiler.4.09.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.8.0 ocaml-version.3.0.0 ocamlbuild.0.14.0
        ocamlfind.1.8.1 odoc.1.5.1 parsexp.v0.14.0 ppx_derivers.1.2.1 ppx_sexp_conv.v0.14.1
        ppxlib.0.15.0 re.1.9.0 result.1.5 rresult.0.6.0 seq.base sexplib.v0.14.0 sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 tyxml.4.4.0 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2
        yaml.2.1.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        || git fetch origin master) && git reset -q --hard 1c3eeb89d37b65d9bd3cf1ab6fdb582f3afb2f9a
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn ppx_deriving_yaml.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y ppx_deriving_yaml.dev $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  winmac:
    strategy:
      matrix:
        operating-system: [windows-latest, macos-latest]
        ocaml-version: [4.11.0, 4.10.0, 4.09.1]
    runs-on: ${{ matrix.operating-system }}
    env:
      DEPS: alcotest.1.2.3 astring.0.8.5 base.v0.14.0 base-bigarray.base base-threads.base
        base-unix.base bigarray-compat.1.0.0 bos.0.2.0 cmdliner.1.0.4 conf-m4.1 conf-pkg-config.1.3
        cppo.1.6.6 csexp.1.3.2 cstruct.6.0.0 ctypes.0.17.1 dune.2.7.1 dune-configurator.2.7.1
        ezjsonm.1.2.0 fmt.0.8.9 fpath.0.7.3 hex.1.4.0 integers.0.4.0 jsonm.1.0.1 logs.0.7.0
        mdx.1.7.0 num.1.3 ocaml.4.11.1 ocaml-base-compiler.4.11.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.8.0 ocaml-version.3.0.0 ocamlbuild.0.14.0
        ocamlfind.1.8.1 odoc.1.5.1 parsexp.v0.14.0 ppx_derivers.1.2.1 ppx_sexp_conv.v0.14.1
        ppxlib.0.15.0 re.1.9.0 result.1.5 rresult.0.6.0 seq.base sexplib.v0.14.0 sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 tyxml.4.4.0 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2
        yaml.2.1.0
    defaults:
      run:
        shell: bash
    steps:
    - uses: actions/checkout@v2
    - uses: avsm/setup-ocaml@v1.1.2
      with:
        ocaml-version: ${{ matrix.ocaml-version }}
    - run: opam pin add -yn ppx_deriving_yaml.dev "./"
    - run: opam depext --update -yt ppx_deriving_yaml.dev
    - run: opam list --short --columns=package > installed.deps; for dep in $DEPS;
        do [[ ! "$dep" =~ $(echo ^\($(paste -sd'|' installed.deps)\)$) && ! "$dep"
        = "ocaml."* && ! "$dep" = "ocaml-base-compiler."* ]] && export NEW_DEPS="$dep
        $NEW_DEPS"; done; echo $NEW_DEPS; opam install $NEW_DEPS
    - run: opam exec -- dune build @install @runtest && rm -rf _build
